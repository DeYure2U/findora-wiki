(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[857],{3905:function(e,n,t){"use strict";t.d(n,{Zo:function(){return d},kt:function(){return m}});var a=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=a.createContext({}),u=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},d=function(e){var n=u(e.components);return a.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},c=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),c=u(t),m=o,k=c["".concat(s,".").concat(m)]||c[m]||p[m]||r;return t?a.createElement(k,l(l({ref:n},d),{},{components:t})):a.createElement(k,l({ref:n},d))}));function m(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var r=t.length,l=new Array(r);l[0]=c;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i.mdxType="string"==typeof e?e:o,l[1]=i;for(var u=2;u<r;u++)l[u]=t[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}c.displayName="MDXCreateElement"},4093:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return i},contentTitle:function(){return s},metadata:function(){return u},toc:function(){return d},default:function(){return c}});var a=t(2122),o=t(9756),r=(t(7294),t(3905)),l=["components"],i={sidebar_position:3},s="How to run a validator node of findora testnet ?",u={unversionedId:"general/run-a-testnet-validator-node",id:"general/run-a-testnet-validator-node",isDocsHomePage:!1,title:"How to run a validator node of findora testnet ?",description:"This document shows:",source:"@site/docs/general/run-a-testnet-validator-node.md",sourceDirName:"general",slug:"/general/run-a-testnet-validator-node",permalink:"/findora-wiki/docs/general/run-a-testnet-validator-node",editUrl:"https://github.com/FindoraNetwork/findora-wiki/edit/main/docs/general/run-a-testnet-validator-node.md",version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Run a Findora Full Node",permalink:"/findora-wiki/docs/general/run-a-mainnet-validator-node"},next:{title:"Create a Page",permalink:"/findora-wiki/docs/tutorial-basics/create-a-page"}},d=[{value:"Preparatory work",id:"preparatory-work",children:[{value:"Obtain the necessary binaries",id:"obtain-the-necessary-binaries",children:[]},{value:"Configure your local node",id:"configure-your-local-node",children:[]}]},{value:"Staking",id:"staking",children:[{value:"Stake into findora network",id:"stake-into-findora-network",children:[]},{value:"Append more power to your node",id:"append-more-power-to-your-node",children:[]},{value:"Query infomations",id:"query-infomations",children:[]},{value:"Claim rewards",id:"claim-rewards",children:[]},{value:"Unstake principals",id:"unstake-principals",children:[]}]}],p={toc:d};function c(e){var n=e.components,t=(0,o.Z)(e,l);return(0,r.kt)("wrapper",(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"how-to-run-a-validator-node-of-findora-testnet-"},"How to run a validator node of findora testnet ?"),(0,r.kt)("p",null,"This document shows:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"How to add your own node to the findora network"),(0,r.kt)("li",{parentName:"ul"},"How to make your node one of the candidate validators by staking")),(0,r.kt)("h2",{id:"preparatory-work"},"Preparatory work"),(0,r.kt)("h3",{id:"obtain-the-necessary-binaries"},"Obtain the necessary binaries"),(0,r.kt)("p",null,"You can get them by downloading or compiling by yourself, we will use the downloading method in this document."),(0,r.kt)("p",null,"The required binary files are:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"tendermint"),": a findora version of tendermint-core node",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/FindoraNetwork/downloads/releases/download/linux/tendermint"},"Linux version")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/FindoraNetwork/downloads/releases/download/macos/tendermint"},"MacOS version")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"abci_validtor_node"),": the abci node of findora network",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/FindoraNetwork/downloads/releases/download/linux/abci_validator_node"},"Linux version")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/FindoraNetwork/downloads/releases/download/macos/abci_validator_node"},"MacOS version")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fns"),": command line tool for staking",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/FindoraNetwork/downloads/releases/download/linux/fns"},"Linux version")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/FindoraNetwork/downloads/releases/download/macos/fns"},"MacOS version")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"stt"),": optional auxiliary tools for staking",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/FindoraNetwork/downloads/releases/download/linux/stt"},"Linux version")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/FindoraNetwork/downloads/releases/download/macos/stt"},"MacOS version"))))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Tips"),":"),(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},"'running a node on Windows' has not been supported yet."),(0,r.kt)("li",{parentName:"ul"},"you should give proper executable permissions to these downloaded binaries",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"like this: ",(0,r.kt)("inlineCode",{parentName:"li"},"chmod +x tendermint abci_validator_node fns stt")))),(0,r.kt)("li",{parentName:"ul"},"you should move these binaries to one of your ",(0,r.kt)("inlineCode",{parentName:"li"},"PATH")," directories as well",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"for example: ",(0,r.kt)("inlineCode",{parentName:"li"},"mv tendermint abci_validator_node fns stt /usr/local/bin")))))),(0,r.kt)("h3",{id:"configure-your-local-node"},"Configure your local node"),(0,r.kt)("h4",{id:"get-keys-and-fras"},"Get keys and FRAs"),(0,r.kt)("p",null,"Generate a new random key for your node:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"fns genkey\n")),(0,r.kt)("p",null,"OutPut example(you should not use this output directly):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"Mnemonic: federal fine minute stairs index segment era typical silver stove girl immense wool case grid figure item clinic primary seek elbow six wonder uncle\nPubKey: NuynC6rhgqgqPKS3Jobb4hhWDOxp8tKi188jIm0O51o=\n")),(0,r.kt)("p",null,"Get enough FRA tokens for the following operations:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# add new FRAs to findora testnet\nstt issue\n\n# transfer some FRAs to your address\n# for example:\n# stt transfer -f root -t 'NuynC6rhgqgqPKS3Jobb4hhWDOxp8tKi188jIm0O51o=' -n $((10000 * 10000 * 1000000))\nstt transfer -f root -t <the public key of your node> -n <amount>\n")),(0,r.kt)("p",null,"Check the result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"fns show\n")),(0,r.kt)("p",null,"OutPut example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'Server URL:\nhttps://prod-testnet.prod.findora.org\n\nXfrPublicKey:\nkUfnrBQXOc_UoKT6UdtcIywjUunNaLaO36GUrvz5Ug4=\n\nValidator Node Addr:\n8DB4CBD00D8E6621826BE6A840A98C28D7F27CD9\n\nYour Balance:\n20999999999990000 FRA units\n\nYour Staking:\n{\n  "bond": 0,\n  "bond_entries": [],\n  "unbond": 0,\n  "rewards": 0,\n  "return_rate": [\n    105,\n    100\n  ],\n  "global_delegation": 0,\n  "global_staking": 17777760000000,\n  "start_height": 0,\n  "end_height": 0,\n  "current_height": 17,\n  "delegation_rwd_cnt": 0,\n  "proposer_rwd_cnt": 0\n}\n')),(0,r.kt)("p",null,"If the 'Your Balance' field is correct, then you can continue."),(0,r.kt)("h4",{id:"set-the-necessary-environment-variables"},"Set the necessary environment variables"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"export\nexport\nexport\nexport\nexport\nexport\nexport\n")),(0,r.kt)("h4",{id:"custom-the-config-of-your-tendermint-core-node"},"Custom the config of your tendermint-core node"),(0,r.kt)("h4",{id:"run-your-locale-node"},"Run your locale node"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"cd <The running path of your abci process> || exit 1\nnohup abci_validator_node &\n\ncd <The running path of your tendermint process> || exit 1\nnohup tendermint node --db_backend=cleveldb &\n")),(0,r.kt)("h4",{id:"check-the-status-of-your-locale-node"},"Check the status of your locale node"),(0,r.kt)("p",null,"If the following commands can return useful message without error, it proves that your node is running well:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"curl 'http://localhost:8667/version'\ncurl 'http://localhost:8668/version'\ncurl 'http://localhost:8669/version'\ncurl 'http://localhost:26657/status'\n")),(0,r.kt)("h2",{id:"staking"},"Staking"),(0,r.kt)("p",null,"For staking operations, you should use the ",(0,r.kt)("inlineCode",{parentName:"p"},"fns")," tool."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Usage example:"),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"fns stake --help")),(0,r.kt)("pre",{parentName:"blockquote"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"USAGE:\n    fns stake [FLAGS] [OPTIONS] --amount <Amount>\n\nFLAGS:\n    -a, --append     stake more FRAs to your node\n\nOPTIONS:\n    -n, --amount <Amount>           how much `FRA unit`s you want to stake\n    -R, --commission-rate <Rate>    the commission rate for delegators, a float number from 0.0 to 1.0\n    -M, --validator-memo <Memo>     the description of your validator node, optional\n")),(0,r.kt)("p",{parentName:"blockquote"},"Similar help information can be obtained through the ",(0,r.kt)("inlineCode",{parentName:"p"},"fns")," tool itself:"),(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fns --help")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fns unstake --help")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fns claim --help")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fns show --help")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fns transfer --help")),(0,r.kt)("li",{parentName:"ul"},"..."))),(0,r.kt)("h3",{id:"stake-into-findora-network"},"Stake into findora network"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Tips"),":"),(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},"you should wait for 100% completion of the data synchronization of your node",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Or you may be punished by the network because of 'validator node offline'"))))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# The minimal amount of FRAs for a successful staking is 888888\nfns stake -n $((888888 * 1000000)) -R 0.2 -M 'Bob Node'\n")),(0,r.kt)("h3",{id:"append-more-power-to-your-node"},"Append more power to your node"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# append 2 FRA units to your node,\n# the power of your node will be increased by 2 if all is well\nfns stake -a -n 2\n")),(0,r.kt)("h3",{id:"query-infomations"},"Query infomations"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"fns show\n")),(0,r.kt)("h3",{id:"claim-rewards"},"Claim rewards"),(0,r.kt)("p",null,"Claim all your rewards:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"fns claim\n")),(0,r.kt)("p",null,"Claim part of your rewards:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# fns claim -n <the amount of FRA units you want>\n# for example,\n# - your want to claim 10 FRAs,\n# - that is 10 * 1000000 FRA units\nfns claim -n $((10 * 1000000))\n")),(0,r.kt)("h3",{id:"unstake-principals"},"Unstake principals"),(0,r.kt)("p",null,"Unstake all your principals:"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"NOTE"),": this operation will make your node out of findora network.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"fns unstake\n")),(0,r.kt)("p",null,"Unstake part of your principals:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# fns unstake -n <the amount of FRA units you want>\n# for example,\n# - your want to unstake 900 FRAs,\n# - that is 900 * 1000000 FRA units\nfns unstake -n $((900 * 1000000))\n")))}c.isMDXComponent=!0}}]);